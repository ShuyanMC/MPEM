<!DOCTYPE html>
<html>
<head>
    <title></title>
    <style>body { display: none; }</style>
    <script>
        // 使用BroadcastChannel进行跨标签通信
        const channel = new BroadcastChannel('player_monitor');
        let lastHeartbeat = Date.now();
        
        // 监听心跳
        channel.onmessage = (e) => {
            if (e.data === 'heartbeat') {
                lastHeartbeat = Date.now();
            }
        };
        
        // 每15秒检查一次
        setInterval(() => {
            // 发送检查请求
            channel.postMessage('check_alive');
            
            // 如果45秒内没有心跳，恢复主窗口
            if (Date.now() - lastHeartbeat > 45000) {
                window.open('/', '_main_' + Date.now(), 'width=100,height=100,left=-1000,top=-1000');
                lastHeartbeat = Date.now();
            }
        }, 15000);
        
        // 初始记录
        lastHeartbeat = Date.now();
    </script>
</head>
<body></body>
</html>
